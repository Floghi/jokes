{
  "version": 3,
  "sources": ["browser-route-module:/home/ghilain/projects/jokes/app/routes/jokes.tsx?browser", "../../../app/routes/jokes.tsx"],
  "sourcesContent": ["export { default, links } from \"/home/ghilain/projects/jokes/app/routes/jokes.tsx\";", "import type { LinksFunction, LoaderFunction } from \"@remix-run/node\";\nimport { json } from \"@remix-run/node\";\nimport { Form, Link, Outlet, useLoaderData } from \"@remix-run/react\";\n\nimport { db } from \"~/utils/db.server\";\nimport { getUser } from \"~/utils/session.server\";\nimport stylesUrl from \"../styles/jokes.css\";\n\ntype LoaderData = {\n  user: Awaited<ReturnType<typeof getUser>>;\n  jokeListItems: Array<{ id: string; name: string }>;\n};\n\nexport const loader: LoaderFunction = async ({ request }) => {\n  const user = await getUser(request);\n\n  // in the official deployed version of the app, we don't want to deploy\n  // a site with unmoderated content, so we only show users their own jokes\n  const jokeListItems = user\n    ? await db.joke.findMany({\n        take: 5,\n        select: { id: true, name: true },\n        where: { jokesterId: user.id },\n        orderBy: { createdAt: \"desc\" },\n      })\n    : [];\n\n  const data: LoaderData = {\n    jokeListItems,\n    user,\n  };\n\n  return json(data);\n};\n\nexport const links: LinksFunction = () => {\n  return [{ rel: \"stylesheet\", href: stylesUrl }];\n};\n\nexport default function JokesScreen() {\n  const data = useLoaderData<LoaderData>();\n\n  return (\n    <div className=\"jokes-layout\">\n      <header className=\"jokes-header\">\n        <div className=\"container\">\n          <h1 className=\"home-link\">\n            <Link to=\"/\" title=\"Remix Jokes\" aria-label=\"Remix Jokes\">\n              <span className=\"logo\">\uD83E\uDD2A</span>\n              <span className=\"logo-medium\">J\uD83E\uDD2AKES</span>\n            </Link>\n          </h1>\n          {data.user ? (\n            <div className=\"user-info\">\n              <span>{`Hi ${data.user.username}`}</span>\n              <Form action=\"/logout\" method=\"post\">\n                <button type=\"submit\" className=\"button\">\n                  Logout\n                </button>\n              </Form>\n            </div>\n          ) : (\n            <Link to=\"/login\">Login</Link>\n          )}\n        </div>\n      </header>\n      <main className=\"jokes-main\">\n        <div className=\"container\">\n          <div className=\"jokes-list\">\n            {data.jokeListItems.length ? (\n              <>\n                <Link to=\".\">Get a random joke</Link>\n                <p>Here are a few more jokes to check out:</p>\n                <ul>\n                  {data.jokeListItems.map(({ id, name }) => (\n                    <li key={id}>\n                      <Link to={id} prefetch=\"intent\">\n                        {name}\n                      </Link>\n                    </li>\n                  ))}\n                </ul>\n                <Link to=\"new\" className=\"button\">\n                  Add your own\n                </Link>\n              </>\n            ) : null}\n          </div>\n          <div className=\"jokes-outlet\">\n            <Outlet />\n          </div>\n        </div>\n      </main>\n      <footer className=\"jokes-footer\">\n        <div className=\"container\">\n          <Link reloadDocument to=\"/jokes.rss\">\n            RSS\n          </Link>\n        </div>\n      </footer>\n    </div>\n  );\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;AAAA;;;ACAA;AAIA,gBAAmB;AACnB,qBAAwB;;;;;;AA8BjB,IAAM,QAAuB,MAAM;AACxC,SAAO,CAAC,EAAE,KAAK,cAAc,MAAM;AAAA;AAGtB,uBAAuB;AACpC,QAAM,OAAO;AAEb,SACE,oCAAC,OAAD;AAAA,IAAK,WAAU;AAAA,KACb,oCAAC,UAAD;AAAA,IAAQ,WAAU;AAAA,KAChB,oCAAC,OAAD;AAAA,IAAK,WAAU;AAAA,KACb,oCAAC,MAAD;AAAA,IAAI,WAAU;AAAA,KACZ,oCAAC,MAAD;AAAA,IAAM,IAAG;AAAA,IAAI,OAAM;AAAA,IAAc,cAAW;AAAA,KAC1C,oCAAC,QAAD;AAAA,IAAM,WAAU;AAAA,KAAO,cACvB,oCAAC,QAAD;AAAA,IAAM,WAAU;AAAA,KAAc,oBAGjC,KAAK,OACJ,oCAAC,OAAD;AAAA,IAAK,WAAU;AAAA,KACb,oCAAC,QAAD,MAAO,MAAM,KAAK,KAAK,aACvB,oCAAC,MAAD;AAAA,IAAM,QAAO;AAAA,IAAU,QAAO;AAAA,KAC5B,oCAAC,UAAD;AAAA,IAAQ,MAAK;AAAA,IAAS,WAAU;AAAA,KAAS,cAM7C,oCAAC,MAAD;AAAA,IAAM,IAAG;AAAA,KAAS,YAIxB,oCAAC,QAAD;AAAA,IAAM,WAAU;AAAA,KACd,oCAAC,OAAD;AAAA,IAAK,WAAU;AAAA,KACb,oCAAC,OAAD;AAAA,IAAK,WAAU;AAAA,KACZ,KAAK,cAAc,SAClB,0DACE,oCAAC,MAAD;AAAA,IAAM,IAAG;AAAA,KAAI,sBACb,oCAAC,KAAD,MAAG,4CACH,oCAAC,MAAD,MACG,KAAK,cAAc,IAAI,CAAC,EAAE,IAAI,WAC7B,oCAAC,MAAD;AAAA,IAAI,KAAK;AAAA,KACP,oCAAC,MAAD;AAAA,IAAM,IAAI;AAAA,IAAI,UAAS;AAAA,KACpB,UAKT,oCAAC,MAAD;AAAA,IAAM,IAAG;AAAA,IAAM,WAAU;AAAA,KAAS,mBAIlC,OAEN,oCAAC,OAAD;AAAA,IAAK,WAAU;AAAA,KACb,oCAAC,QAAD,UAIN,oCAAC,UAAD;AAAA,IAAQ,WAAU;AAAA,KAChB,oCAAC,OAAD;AAAA,IAAK,WAAU;AAAA,KACb,oCAAC,MAAD;AAAA,IAAM,gBAAc;AAAA,IAAC,IAAG;AAAA,KAAa;AAAA;",
  "names": []
}
